{"Version":"2019-10-30","StartAction":"861b6b30-8f59-435a-b8c8-9ffb5c032afc","Metadata":{"entryPointPosition":{"x":14.4,"y":14.4},"ActionMetadata":{"861b6b30-8f59-435a-b8c8-9ffb5c032afc":{"position":{"x":221.6,"y":32}},"ef1f6377-dda8-4412-9cef-5918c9cac17b":{"position":{"x":2748,"y":790.4}},"6339b495-ff9d-4022-91aa-af443e242140":{"position":{"x":245.6,"y":248},"overrideConsoleVoice":true},"1c6c688d-7365-4263-a702-5e40e0f86009":{"position":{"x":2288,"y":936}},"a546ea71-8d53-4438-ad18-8e260664bc45":{"position":{"x":3100,"y":564}},"e0528449-a09d-452b-9fd6-66c30dc1904c":{"position":{"x":3004,"y":252.8},"dynamicParams":[]},"a0fbb23b-bbe6-40a9-86e5-925d238ba325":{"position":{"x":2337.6,"y":80}},"cc1e8a67-b3d7-491a-852a-4ecbb838d87f":{"position":{"x":797.6,"y":1012}},"30aa5dc2-b9f5-404e-b5c4-9a8f6b230303":{"position":{"x":861.6,"y":68.8},"parameters":{"Attributes":{"CallBackStatus":{"useDynamic":true}}},"dynamicParams":["CallBackStatus"]},"445091d5-fa5e-4eb9-aa7d-222aa3e351bf":{"position":{"x":248,"y":436.8},"parameters":{"Attributes":{"CallbackNumber":{"useDynamic":true}}},"dynamicParams":["CallbackNumber"]},"b68e433e-f5c2-4bd8-910f-b5a9005fc793":{"position":{"x":553.6,"y":228.8},"parameters":{"LambdaFunctionARN":{"displayName":"dev-ccaas-callback-read-callback-fn"}},"dynamicMetadata":{}},"bff62510-acff-4b31-b86c-48ddc03ab4bd":{"position":{"x":1449.6,"y":356},"parameters":{"LambdaFunctionARN":{"displayName":"dev-ccaas-callback-get-current-time-fn"}},"dynamicMetadata":{}},"1bf880c6-e864-4f66-8f91-3cc1fb73e578":{"position":{"x":2037.6,"y":72.8},"parameters":{"Attributes":{"TenDigitPhoneNumber":{"useDynamic":true}}},"dynamicParams":["TenDigitPhoneNumber"]},"6cb2a5a5-3deb-4d9f-80ac-f9cc15f0d336":{"position":{"x":1164,"y":62.4},"conditions":[],"conditionMetadata":[{"id":"3d586414-d888-4f9f-9b3a-7cfbece77ec8","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"PENDING"}]},"7cc090da-bf1b-4b1e-b78b-2b7f7656af9f":{"position":{"x":1704,"y":67.2},"parameters":{"LambdaFunctionARN":{"displayName":"dev-ccaas-callback-get-10-digit-phone-fn"},"LambdaInvocationAttributes":{"enteredPhoneNumber":{"useDynamic":true}}},"dynamicMetadata":{"enteredPhoneNumber":true}},"23119d0a-8093-43b8-a6c3-a3213b9672c8":{"position":{"x":2365.6,"y":609.6}},"aa2fa38e-ff22-4c9f-8867-bf4b46ba4275":{"position":{"x":1562.4,"y":602.4},"parameters":{"Attributes":{"CallBackStatusDT":{"useDynamic":true},"ContactId":{"useDynamic":true}}},"dynamicParams":["CallBackStatusDT","ContactId"]},"ca586f8b-a3cf-4abd-b6d9-a6b5fb27eeae":{"position":{"x":1916,"y":587.2},"parameters":{"LambdaFunctionARN":{"displayName":"dev-ccaas-callback-update-callback-fn"}},"dynamicMetadata":{}}},"Annotations":[],"name":"cbAgentCallBackWhisper","description":"","type":"agentWhisper","status":"published","hash":{}},"Actions":[{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"861b6b30-8f59-435a-b8c8-9ffb5c032afc","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"6339b495-ff9d-4022-91aa-af443e242140"}},{"Parameters":{"SSML":"<speak><break time=\"3s\"/>This is a cancelled callback. Please hangup the call.</speak>"},"Identifier":"ef1f6377-dda8-4412-9cef-5918c9cac17b","Type":"MessageParticipant","Transitions":{"NextAction":"1c6c688d-7365-4263-a702-5e40e0f86009"}},{"Parameters":{"TextToSpeechVoice":"Joanna","TextToSpeechEngine":"Neural","TextToSpeechStyle":"Conversational"},"Identifier":"6339b495-ff9d-4022-91aa-af443e242140","Type":"UpdateContactTextToSpeechVoice","Transitions":{"NextAction":"445091d5-fa5e-4eb9-aa7d-222aa3e351bf"}},{"Parameters":{"LoopCount":"3"},"Identifier":"1c6c688d-7365-4263-a702-5e40e0f86009","Type":"Loop","Transitions":{"NextAction":"e0528449-a09d-452b-9fd6-66c30dc1904c","Conditions":[{"NextAction":"23119d0a-8093-43b8-a6c3-a3213b9672c8","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"e0528449-a09d-452b-9fd6-66c30dc1904c","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{},"Identifier":"a546ea71-8d53-4438-ad18-8e260664bc45","Type":"EndFlowExecution","Transitions":{}},{"Parameters":{"Attributes":{"CallBackStatus":"OFFERED"},"TargetContact":"Current"},"Identifier":"e0528449-a09d-452b-9fd6-66c30dc1904c","Type":"UpdateContactAttributes","Transitions":{"NextAction":"a546ea71-8d53-4438-ad18-8e260664bc45","Errors":[{"NextAction":"a546ea71-8d53-4438-ad18-8e260664bc45","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>Hello, you have a new callback request. The customerâ€™s phone number is. <say-as interpret-as=\"telephone\">$.Attributes.TenDigitPhoneNumber</say-as>.\nPlease hold while I call the customer</speak>"},"Identifier":"a0fbb23b-bbe6-40a9-86e5-925d238ba325","Type":"MessageParticipant","Transitions":{"NextAction":"e0528449-a09d-452b-9fd6-66c30dc1904c"}},{"Parameters":{"Text":"Error or Time out in Lambda"},"Identifier":"cc1e8a67-b3d7-491a-852a-4ecbb838d87f","Type":"MessageParticipant","Transitions":{"NextAction":"ef1f6377-dda8-4412-9cef-5918c9cac17b"}},{"Parameters":{"Attributes":{"CallBackStatus":"$.External.CallBackStatus"},"TargetContact":"Current"},"Identifier":"30aa5dc2-b9f5-404e-b5c4-9a8f6b230303","Type":"UpdateContactAttributes","Transitions":{"NextAction":"6cb2a5a5-3deb-4d9f-80ac-f9cc15f0d336","Errors":[{"NextAction":"6cb2a5a5-3deb-4d9f-80ac-f9cc15f0d336","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"CallbackNumber":"$.CallbackNumber","ContactFlowName":"cbAgentCallBackWhisper"},"TargetContact":"Current"},"Identifier":"445091d5-fa5e-4eb9-aa7d-222aa3e351bf","Type":"UpdateContactAttributes","Transitions":{"NextAction":"b68e433e-f5c2-4bd8-910f-b5a9005fc793","Errors":[{"NextAction":"b68e433e-f5c2-4bd8-910f-b5a9005fc793","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:043203471090:function:dev-ccaas-callback-read-callback-fn","InvocationTimeLimitSeconds":"3","ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"b68e433e-f5c2-4bd8-910f-b5a9005fc793","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"30aa5dc2-b9f5-404e-b5c4-9a8f6b230303","Errors":[{"NextAction":"cc1e8a67-b3d7-491a-852a-4ecbb838d87f","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:043203471090:function:dev-ccaas-callback-get-current-time-fn","InvocationTimeLimitSeconds":"8","ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"bff62510-acff-4b31-b86c-48ddc03ab4bd","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"aa2fa38e-ff22-4c9f-8867-bf4b46ba4275","Errors":[{"NextAction":"aa2fa38e-ff22-4c9f-8867-bf4b46ba4275","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"TenDigitPhoneNumber":"$.External.TenDigitPhoneNumber"},"TargetContact":"Current"},"Identifier":"1bf880c6-e864-4f66-8f91-3cc1fb73e578","Type":"UpdateContactAttributes","Transitions":{"NextAction":"a0fbb23b-bbe6-40a9-86e5-925d238ba325","Errors":[{"NextAction":"a0fbb23b-bbe6-40a9-86e5-925d238ba325","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.Attributes.CallBackStatus"},"Identifier":"6cb2a5a5-3deb-4d9f-80ac-f9cc15f0d336","Type":"Compare","Transitions":{"NextAction":"bff62510-acff-4b31-b86c-48ddc03ab4bd","Conditions":[{"NextAction":"7cc090da-bf1b-4b1e-b78b-2b7f7656af9f","Condition":{"Operator":"Equals","Operands":["PENDING"]}}],"Errors":[{"NextAction":"bff62510-acff-4b31-b86c-48ddc03ab4bd","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:043203471090:function:dev-ccaas-callback-get-10-digit-phone-fn","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"enteredPhoneNumber":"$.CallbackNumber"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"7cc090da-bf1b-4b1e-b78b-2b7f7656af9f","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"1bf880c6-e864-4f66-8f91-3cc1fb73e578","Errors":[{"NextAction":"1bf880c6-e864-4f66-8f91-3cc1fb73e578","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Callback was cancelled, Please hang up the phone."},"Identifier":"23119d0a-8093-43b8-a6c3-a3213b9672c8","Type":"MessageParticipant","Transitions":{"NextAction":"ef1f6377-dda8-4412-9cef-5918c9cac17b"}},{"Parameters":{"Attributes":{"CallBackStatus":"COMPLETED","CallBackStatusDT":"$.External.DateTime","ContactId":"$.ContactId"},"TargetContact":"Current"},"Identifier":"aa2fa38e-ff22-4c9f-8867-bf4b46ba4275","Type":"UpdateContactAttributes","Transitions":{"NextAction":"ca586f8b-a3cf-4abd-b6d9-a6b5fb27eeae","Errors":[{"NextAction":"ca586f8b-a3cf-4abd-b6d9-a6b5fb27eeae","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:043203471090:function:dev-ccaas-callback-update-callback-fn","InvocationTimeLimitSeconds":"4","ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"ca586f8b-a3cf-4abd-b6d9-a6b5fb27eeae","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"23119d0a-8093-43b8-a6c3-a3213b9672c8","Errors":[{"NextAction":"23119d0a-8093-43b8-a6c3-a3213b9672c8","ErrorType":"NoMatchingError"}]}}]}